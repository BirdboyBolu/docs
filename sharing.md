# Shared data



## Intro

Основная цель проекта BitDust является создание такой среды для пользователя, в которой он имел бы полный контроль над собственными данными и каналами связи.

Однако в мире, где общение между людьми все чаще и чаще происходит с помощью цифорвых устройств, невозможно оставаться полностью изолированным в цифровой среде. Другими словами нам просто необходимо иметь возможность работать не только с собственными данными, но и с данными, поступающих к нам извне.

Еще одна цель проекта BitDust, заключается в создании альтернативных способов для обмена цифровыми данными между пользователями, которые бы предоставили более высокий уровень приватности и контроля над подобными "общими" данными.

В этой статье содержится подробная информация о способах контроля и предоставления доступа к собственным данным для других пользователей программы BitDust. 



## Master Key

Поскольку все твои персональные данные в сети BitDust хранятся распределенно на машинах других пользователей, они всегдя шифруются перед тем как покинут твой компьютер - подробно метод защиты изложен в статье [Data Security](security). Ваш основной приватный ключ, здесь и далее мы будем называть его "master key", используется для шифрования-дешифрования ваших личных данных в процессе хранения на машинах поставщиков.

В целях личной безопасности вам следует сделать резервную копию Master ключа в надежном месте сразу после установки программы BitDust на ваше устройство. В любых других случаях Master key никогда не должен покидать ваше устройство и ни при каких обстоятельствах не должен быть передам кому либо другому. Он и только он защищает ваши личные данные и доступ к сети BitDust.



## Shared keys

Кроме Master key, в BitDust существуют и другие приватные ключи которые можно использовать для работы с данными. В программе BitDust были реализованы криптографические методы для работы с многими ключами, которые пользователь может использовать по собственному желанию и полностью имеет контроль над ними.

Использование дополнительных ключей в BitDust очень похоже на то как вы используете обычную связку ключей, которыми вы закрываете-открываете двери в ваш дом. Например если к вам приехал гость и вы бы хотели поселить его в одну из своих комнат, вы даете ему копию ключа от этой комнаты а оригинал оставляете себе. Таким образом и вы и он имеете доступ к общему пространству гостевой комнаты. Однако у вас в доме, может например существовать сейф для хранения семейных документов или ценностей, и ключ к сейфу вы никогда и ни прикаких обстоятельствах не передаете кому либо.

Вы BitDust вы можете в любой момент создать новый дополнительный приватный ключ и использовать его для того что бы зашифровать некоторые данные, которые будут загружены на машины ваших поставщиков. Данные хранятся распределенно, точно также как это происходит когда вы шифруете их вашим master key - это подробно описано в статье (Data Storage)[storage], но вы просто используете не основной а дополнительный ключ для шифрования. Позже вы можете передать этот дополнительный ключ другому пользователю, которому вы доверяете, и он будет иметь возмоность скачать конкретно этот кусок данных и расшифровать их на своем устройстве. Таким образом мы можем обмениваться личными данными друг с другом и при этом наши хранители, как и раньше, лишь помогают нам в этом, но не имеют доступ к данным.

В BitDust вы можете совершать следующие действия с вашими дополнительными ключами:

    * создать новый ключ присвоив ему некоторое имя
    * создать новый ключ со случайно сгенерированным именем
    * удалить существующий приватный ключ
    * переслать публичную часть ключа другому пользователю
    * переслать приватную часть ключа другому пользователю
    * просмотреть список всех ключей: созданных вами или полученных от других пользователей
    * провести аудит данного публичного ключа и проверить что другой пользователь так же обладает этим публичным ключом 
    * провести аудит данного приватного ключа и проверить что другой пользователь так же обладает этим приватным ключом 
    * использовать приватный ключ для шифрования загружаемых в сеть BitDust данных
    * использовать приватный ключ для дешифрования скачиваемых из сети данных


Вы найдете ваши дополнительные приватные ключи в папке `.bitdust/keys`, в данный момент используется алгоритм RSA который широко используется в Мире.



## Grant access

При передаче дополнительного ключа от одного пользователя к другому фактически происходит пересылка одного из текстовых файлов из папки `.bitdust/keys` на удаленную машину получателя. Ключ не передается в открытом виде а шифруется с помощию Master key получателя перед отправкой - только он сможет дешифровать этот текстовый файл и получить копию передаваемоо ключа. Программа BitDust на его машине получив ключ, сохранит файл ключа в папке `.bitdust/keys` и в дальнейшем пользователь сможет использовать данный ключ для работы с общими файлами.

Важно понимать, что данное действие необратимо. Вы не можете "забрать" ключ обратно, после того как передали его вашему другу, ведь контроль над его операционнй системой имеет только он! Фактически, после того как вы передали ключ другому пользователю - вы оба являетесь почти полностью полноправными владельцами тех данных, которые были зашифрованны данным ключом. Мы говорим ­"почти" потому как данные хранятся на ваших хранителях и вы имеете "больше прав" внутри собственного распределенного хранилища чем тот пользователь который получил лишь копию одного из ваших дополнительных ключей. Например в любой момент вы можете потребовать у ваших хранителей удалить эти данные и по умолчанию они выполнят это.


## Audit access

Основная задача поставщика - хранить и предоставлять доступ к файлам тебе и другим пользователям, фактически "позволять скачать" файл по запросу. Для этого каждый поставщик должен иметь конкретные инструкции и установленный порядок действий, которые ему следует выполнить в момент запроса к распределенным "общим" данным на его устройстве от тебя или доверенного пользователя. Поскольку все данные, которые поставщик хранит являются зашифрованными, то даже если он является "злоумышленником" и "отдает" куски ваших данных всем подряд, вы все равно можете быть спокойны - только тот, кто обладает нужным ключом, сможет "прочитать" ваши файлы.

Однако в программе BitDust были реализованы методы фильтрации и валидации запросов к загруженным в сеть данным – по умолчанию поставщик "проверит" что тот кто запрашивает кусок данных действительно обладает нужным ключом для расшифровки данных. Он может провести "аудит" ключа пользователя, который обращается к нем. Для этого он должен хранить у себя публичную часть ключа, которым были зашифрованны данные. Этот публичный ключ он получает от тебя, в момент, когда ты предоставляешь доступ к данным "доверенному" пользователю.

Ниже приведен общий порядок действий совершаемых программой BitDust на твоем устройстве в момент передачи одного из твоих дополнительных ключей другому пользователю:

	1. проверка состояния соединения с компьютером доверенного пользователя
	2. аудит мастер ключа доверенного пользователя
	3. пересылка публичной части дополнительного ключа всем твоим хранителям
	4. пересылка приватной части дополнительгого ключа доверенному пользователю
	5. пересылка списка имен файлов, которые уже были зашифрованны данным дополнительным ключом доверенному пользователю



## Receiving shared keys

В предыдущих параграфах были описаны методы передачи прав доступа к твоим данным другому пользователю, которому вы доверяете. Далее будет подробно изложено что происходит на его устройстве и как он может использовать полученный от тебя ключ для того что бы скачать общие данные к себе.

Подразумевается что программа BitDust уже запущенна и подключена к другим узлам сети BitDust в момент передачи дополнительного ключа на обоих устройствах. В случае если даритель или получатель не были подключены к сети и не имели возможность напрямую обмениваться сервисными пакетами по каналам BitDust – процесс окончится неудачей и доступ не будет предоставлен.

Программа BitDust на машине доверенного пользователя постоянно находится в состоянии ожидания входящих сервисных пакетов данных и всегда готова принять новый ключ доступа. После получения и дешифровки файла с ключом он будет сохранен в папке `.bitdust/keys`. Ты всегда можешь узнать какие ключи доступа были переданны тебе от других пользователей - каждый ключ имеет уникальный глобальный идентификатор, который выглядит следующим образом:

        share_0780f0d64b017303a0d81865eee009f1$veselin_penev@some-id-hostname.net


Начальная часть идентификатора до знака `$` называется "key alias" и служит для идентификации конкретного ключа среди множества дополнительных ключей, созданных данным пользователем. Оставшаяся часть после знака `$` является уникальным глобальным идентификатором того пользователя, который первым сгенерировал данный ключ на своем устройсте. Более подробно об идентификации пользователей в сети BitDust ты сможешь прочитать в статье (User Identification)[#identities].

Данный метод идентфикации ключей доступа всегда однозначно определяет кто является создателем данных и на чьих поставщиках фактически хранятся зашифрованные фрагменты файлов в сети BitDust. Другими словами, получив новый ключ доступа от кого либо, ты всегда знаешь где находится тот "сундук", который был "заперт" данным ключом.



## Reading shared data

Итак для доступа к "чужим" файлам необходимо использовать идентификатор ключа для определения "местоположения" данных. Мы используе слово "местоположение" в переносном смысле, поскольку все данные хранятся полностью распределенно на машинах поставщиков. Для скачивания фрагментов файлов и дешифровки необходимо определить текущих активных поставщиков, соединиться с ними и запросить все фрагменты данных относящихся к данному "общему" файлу.

В программе BitDust список твоих поставщиков хранится и поддерживается не только на твоем устройстве, но и в распределенной хэш таблице - твои поставщики автоматически поддерживают и периодически обновляют эти записи. Благодаря этому любой пользователь всегда имеет возможность "просканировать" список твоих поставщиков и узнать куда ему необходимо обращаться что бы скачать те файлы к которым ты ему "открыл доступ". Процесс "сканирования" данного списка  занимает некоторое время, в зависимости от колличества твоих поставщиков. Более подробно вы можете ознакомиться с тем как программа BitDust использует эти сервисные данные в статье (Distributed Hash-table)[#dht].

Соединившись с "чужими" поставщиками ты можешь запросить у них нужные фрагменты данных, относящиеся к тому или иному "общему" файлу. Если ключ доступа который ты получил от "дарителя" 



<div class=fbcomments markdown="1">
</div
